---
const { undangan } = Astro.params;
---
  <form id="form-body" class="" method="POST">
    <div class="hidden">
      <input type="text" name="nama_def" value=`${undangan}`/>
    </div>
    <div class="c-rsvp-nama">
      <label for="form-nama">Nama Undangan</label>
      <input type="text" name="nama" id="form-nama" class="input input-height" required/>
    </div>
    <div class="c-rsvp-rsvp">
      <label for="form-rsvp">Kehadiran</label>
      <select name="rsvp" id="form-rsvp" class="input input-height" required>
        <option value="2">Hadir</option>
        <option value="1">Belum dapat dipastikan</option>
        <option value="0">Tidak hadir</option>
      </select>
    </div>
    <div class="c-rsvp-comment">
      <label for="form-comment">Doa dan Ucapan</label>
      <textarea name="comment" rows="5" cols="50" id="form-comment" class="input"/>
    </div>
    <button type="submit">Submit</button>
  </form>


<script>
  const newRSVP = document.querySelector("#form-body") as HTMLFormElement;
  newRSVP?.addEventListener("submit", async (e) => {
    e.preventDefault();
    document.getElementById("form-body").classList.add("hidden");
    const formData = new FormData(newRSVP);
    const vals = Object.fromEntries(formData);
    const res = await fetch("/api/noco.json", {
      method: "POST",
      body: JSON.stringify(vals),
    });
  });
</script>
